(function(d){var b=3;try{b=parseInt(d.fn.dropdown.Constructor.VERSION,10)}catch(r){}var t={3:{buttonsClass:"default",iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus",fullscreen:"glyphicon-fullscreen"},pullClass:"pull",toobarDropdowHtml:['<ul class="dropdown-menu" role="menu">',"</ul>"],toobarDropdowItemHtml:'<li role="menuitem"><label>%s</label></li>',pageDropdownHtml:['<ul class="dropdown-menu" role="menu">',"</ul>"],pageDropdownItemHtml:'<li role="menuitem" class="%s"><a href="#">%s条/页</a></li>'},4:{buttonsClass:"secondary",iconsPrefix:"fa",icons:{paginationSwitchDown:"fa-toggle-down",paginationSwitchUp:"fa-toggle-up",refresh:"fa-refresh",toggle:"fa-toggle-on",columns:"fa-th-list",detailOpen:"fa-plus",detailClose:"fa-minus",fullscreen:"fa-arrows-alt"},pullClass:"float",toobarDropdowHtml:['<div class="dropdown-menu dropdown-menu-right">',"</div>"],toobarDropdowItemHtml:'<label class="dropdown-item">%s</label>',pageDropdownHtml:['<div class="dropdown-menu">',"</div>"],pageDropdownItemHtml:'<a class="dropdown-item %s" href="#">%s</a>'}}[b];var m=null;var l=function(x){var v=arguments,e=true,w=1;x=x.replace(/%s/g,function(){var y=v[w++];if(typeof y==="undefined"){e=false;return""}return y});return e?x:""};var h=function(w,y,x,v){var e="";d.each(w,function(z,A){if(A[y]===v){e=A[x];return false}return true});return e};var i=function(w){var A,z,y,C=0,D=[];for(A=0;A<w[0].length;A++){C+=w[0][A].colspan||1}for(A=0;A<w.length;A++){D[A]=[];for(z=0;z<C;z++){D[A][z]=false}}for(A=0;A<w.length;A++){for(z=0;z<w[A].length;z++){var e=w[A][z],x=e.rowspan||1,v=e.colspan||1,B=d.inArray(false,D[A]);if(v===1){e.fieldIndex=B;if(typeof e.field==="undefined"){e.field=B}}for(y=0;y<x;y++){D[A+y][B]=true}for(y=0;y<v;y++){D[A][B+y]=true}}}};var j=function(){if(m===null){var w=d("<p/>").addClass("fixed-table-scroll-inner"),x=d("<div/>").addClass("fixed-table-scroll-outer"),v,e;x.append(w);d("body").append(x);v=w[0].offsetWidth;x.css("overflow","scroll");e=w[0].offsetWidth;if(v===e){e=x[0].clientWidth}x.remove();m=v-e}return m};var p=function(v,x,w,e){var y=x;if(typeof x==="string"){var z=x.split(".");if(z.length>1){y=window;d.each(z,function(A,B){y=y[B]})}else{y=window[x]}}if(typeof y==="object"){return y}if(typeof y==="function"){return y.apply(v,w||[])}if(!y&&typeof x==="string"&&l.apply(this,[x].concat(w))){return l.apply(this,[x].concat(w))}return e};var n=function(v,e,z){var B=Object.getOwnPropertyNames||function(E){var C=[];for(var D in E){if(E.hasOwnProperty(D)){C.push(D)}}return C};var A=B(v),x=B(e),y="";if(z){if(A.length!==x.length){return false}}for(var w=0;w<A.length;w++){y=A[w];if(d.inArray(y,x)>-1){if(v[y]!==e[y]){return false}}}return true};var o=function(e){if(typeof e==="string"){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;")}return e};var f=function(w){for(var e in w){var v=e.split(/(?=[A-Z])/).join("-").toLowerCase();if(v!==e){w[v]=w[e];delete w[e]}}return w};var a=function(y,C,B){if(y.find(".no-records-found").length>0){return 0}var x=null;var v=y.closest(".modal-body");if(v.length){var z=v.parent();var w=z.attr("style").indexOf("height")>-1;if(w){x=v.offset().top+v.outerHeight()-y.offset().top}else{x=d(window).height()-(y.offset().top-z.offset().top)-48;var e=v.next(".modal-footer");if(e.length){x-=v.next(".modal-footer").outerHeight()}}x-=parseInt(v.css("paddingBottom"))}else{x=d(window).height()-y.offset().top-parseInt(y.css("paddingTop"))-parseInt(y.css("paddingBottom"));var A=y.parents(".page-body,.tab-pane");A.each(function(){x-=(parseInt(d(this).css("paddingBottom"))+parseInt(d(this).css("marginBottom")))})}if(!C||C<=0){C=280}if(x<C){x=C}if(B&&x>B){x=B}return x};var s=function(w,z,v){var x=w;if(typeof z!=="string"||w.hasOwnProperty(z)){return v?o(w[z]):w[z]}var e=z.split(".");for(var y in e){if(e.hasOwnProperty(y)){x=x&&x[e[y]]}}return v?o(x):x};var q=function(){return !!(navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))};var u=function(){if(!Object.keys){Object.keys=(function(){var w=Object.prototype.hasOwnProperty,x=!({toString:null}).propertyIsEnumerable("toString"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=v.length;return function(A){if(typeof A!=="object"&&(typeof A!=="function"||A===null)){throw new TypeError("Object.keys called on non-object")}var y=[],B,z;for(B in A){if(w.call(A,B)){y.push(B)}}if(x){for(z=0;z<e;z++){if(w.call(A,v[z])){y.push(v[z])}}}return y}}())}};var k=function(v,e){this.options=e;this.$el=d(v);this.$el_=this.$el.clone();this.timeoutId_=0;this.timeoutFooter_=0;this.index=k.DEFAULTS.index++;this.init()};k.DEFAULTS={index:0,classes:"table table-hover",sortClass:undefined,locale:undefined,height:undefined,undefinedText:"-",sortName:undefined,sortOrder:"both",sortStable:false,serverSort:false,multiSort:false,sortInfo:[],sortIndexName:"sort_index",rememberOrder:false,striped:false,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:undefined,ajax:undefined,cache:true,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(e){return e},queryParamsType:"limit",responseHandler:function(e){return e},pagination:false,simplePage:false,onlyInfoPagination:false,paginationLoop:true,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"<",paginationNextText:">",search:false,searchOnEnterKey:false,strictSearch:false,searchAlign:"right",selectItemName:"btSelectItem",showHeader:true,showFooter:false,showColumns:false,showPaginationSwitch:false,showRefresh:false,showToggle:false,showFullscreen:false,smartDisplay:true,escape:false,minimumCountColumns:1,idField:undefined,uniqueId:undefined,cardView:false,detailView:false,detailFormatter:function(e,v){return""},detailFilter:function(e,v){return true},trimOnSearch:true,clickToSelect:false,singleSelect:false,toolbar:undefined,toolbarAlign:"left",buttonsToolbar:undefined,buttonsAlign:"right",checkboxHeader:true,sortable:true,silentSort:true,maintainSelected:false,searchTimeOut:500,searchText:"",iconSize:undefined,buttonsClass:t.buttonsClass,iconsPrefix:t.iconsPrefix,icons:t.icons,customSearch:d.noop,customSort:d.noop,ignoreClickToSelectOn:function(e){return d.inArray(e.tagName,["A","BUTTON"])},rowStyle:function(v,e){return{}},rowAttributes:function(v,e){return{}},footerStyle:function(v,e){return{}},onAll:function(v,e){return false},onClickCell:function(w,v,x,e){return false},onDblClickCell:function(w,v,x,e){return false},onClickRow:function(v,e){return false},onDblClickRow:function(v,e){return false},onSort:function(v,e){return false},onCheck:function(e){return false},onUncheck:function(e){return false},onCheckAll:function(e){return false},onUncheckAll:function(e){return false},onCheckSome:function(e){return false},onUncheckSome:function(e){return false},onLoadSuccess:function(e){return false},onLoadError:function(e){return false},onColumnSwitch:function(v,e){return false},onPageChange:function(v,e){return false},onSearch:function(e){return false},onToggle:function(e){return false},onPreBody:function(e){return false},onPostBody:function(){return false},onPostHeader:function(){return false},onExpandRow:function(e,w,v){return false},onCollapseRow:function(e,v){return false},onRefreshOptions:function(e){return false},onRefresh:function(e){return false},onResetView:function(){return false},onScrollBody:function(){return false}};k.LOCALES={};k.LOCALES["en-US"]=k.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(e){return l("%s rows per page",e)},formatShowingRows:function(w,e,v){return l("Showing %s to %s of %s rows",w,e,v)},formatDetailPagination:function(e){return l("Showing %s rows",e)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatFullscreen:function(){return"Fullscreen"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}};d.extend(k.DEFAULTS,k.LOCALES["en-US"]);k.COLUMN_DEFAULTS={radio:false,checkbox:false,checkboxEnabled:true,field:undefined,title:undefined,titleTooltip:undefined,"class":undefined,align:undefined,halign:undefined,falign:undefined,valign:undefined,width:undefined,sortable:false,order:"both",visible:true,switchable:true,clickToSelect:true,formatter:undefined,footerFormatter:undefined,events:undefined,sorter:undefined,sortName:undefined,cellStyle:undefined,searchable:true,searchFormatter:true,cardVisible:true,escape:false,showSelectTitle:false};k.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh","scroll-body.bs.table":"onScrollBody"};k.prototype.init=function(){this.initLocale();this.initContainer();this.initTable();this.initHeader();this.initData();this.initHiddenRows();this.initFooter();this.initToolbar();this.initPagination();this.initBody();this.initSearchText();this.initServer()};k.prototype.initLocale=function(){if(this.options.locale){var e=this.options.locale.split(/-|_/);e[0].toLowerCase();if(e[1]){e[1].toUpperCase()}if(d.fn.bootstrapTable.locales[this.options.locale]){d.extend(this.options,d.fn.bootstrapTable.locales[this.options.locale])}else{if(d.fn.bootstrapTable.locales[e.join("-")]){d.extend(this.options,d.fn.bootstrapTable.locales[e.join("-")])}else{if(d.fn.bootstrapTable.locales[e[0]]){d.extend(this.options,d.fn.bootstrapTable.locales[e[0]])}}}}};k.prototype.initContainer=function(){var A=[],w=[],C=[];if(this.$el.attr("style")){C.push(this.$el.attr("style"))}if(this.$el.attr("class")){w.push(this.$el.attr("class").replace("ezui",""))}if(this.options.hidden){C.push("display:none;")}if(C.length>0){A.push("style='"+C.join(";")+"'")}this.$container=d([l('<div class="bootstrap-table %s" %s>',w.join(" "),A.join(" ")),'<div class="fixed-table-loading"><div class="loading-content"><i class="icon icon-spin icon-spinner icon-2x"></i><div class="loading-text">',this.options.formatLoadingMessage(),"</div></div></div>",this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body"></div>','<div class="fixed-table-footer"></div>',"</div>",this.options.paginationVAlign==="bottom"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination"></div>':"",this.options.footer?"<div class='ez-table-footer'></div>":"","</div>"].join(""));this.$container.insertAfter(this.$el);this.$tableContainer=this.$container.find(".fixed-table-container");this.$tableHeader=this.$container.find(".fixed-table-header");this.$tableBody=this.$container.find(".fixed-table-body");this.$tableLoading=this.$container.find(".fixed-table-loading");this.$tableFooter=this.$container.find(".fixed-table-footer");this.$tableTitle=this.$container.find(".fixed-table-title");if(this.options.buttonsToolbar){this.$toolbar=d("body").find(this.options.buttonsToolbar)}else{this.$toolbar=this.$container.find(".fixed-table-toolbar")}this.$pagination=this.$container.find(".fixed-table-pagination");if(this.$pagination.length&&this.options.simplePage){this.$pagination.addClass("simple-page")}this.$tableBody.append(this.$el);var e=["table table-hover"];if(this.options.bordered){e.push("table-bordered")}else{this.$tableContainer.addClass("table-no-bordered")}if(this.options.striped){e.push("table-striped")}this.$el.addClass(e.join(" "));if(this.options.fixedHorizontalScroll){var y=this;var D=d('<div class="ez-table-fixed-scrollbar-wrapper"><div class="ez-table-fixed-scrollbar"></div></div>');this.$container.append(D);this.scrollbar=D;D.on("scroll",function(){y.$tableBody.scrollLeft(d(this).scrollLeft())});y.$tableBody.off("scroll.table.fixed.scrollbar").on("scroll.table.fixed.scrollbar",function(){D.scrollLeft(d(this).scrollLeft())});var v=d(window);var z=this.$container.closest(".page-wrapper");if(z.length){v=z}this._$target=v;var B="scroll.table.fixed.scrollbar."+this.options.tagId;v.off(B).on(B,function(){y.fitScrollbar2()});var x="resize.table.fixed.scrollbar."+this.options.tagId;d(window).off(x).on(x,function(){v.trigger(B);D.width(y.$tableBody.get(0).clientWidth);D.find(".ez-table-fixed-scrollbar").width(y.$tableBody.find(">table").get(0).clientWidth);var G=y._$target.get(0).getBoundingClientRect();var F=v.find(".page-footer");var E=G.bottom-(F.length?F.height():0);D.css("bottom",document.body.clientHeight-E)})}};k.prototype.fitScrollbar2=function(){clearTimeout(this.timeoutScrollbar2_);if(this.$el.is(":hidden")){this.timeoutScrollbar2_=setTimeout(d.proxy(this.fitScrollbar2,this),100);return}var w=this;var e=function(){var A=w.$tableBody.get(0).getBoundingClientRect();var z=w._$target.get(0).getBoundingClientRect();return A.bottom>z.bottom&&A.top<z.bottom};var v=d.browser.webkit?10:17;if(e()){var y=this.$tableContainer.get(0).getBoundingClientRect();var x=w._$target.get(0).getBoundingClientRect();this.scrollbar.show()}else{this.scrollbar.hide()}};k.prototype.initTable=function(){var w=this,v=[],x=[];this.$header=this.$el.find(">thead");if(!this.$header.length){this.$header=d("<thead></thead>").appendTo(this.$el)}this.$header.find("tr").each(function(){var y=[];d(this).find("th").each(function(){if(typeof d(this).data("field")!=="undefined"){d(this).data("field",d(this).data("field")+"")}y.push(d.extend({},{title:d(this).html(),"class":d(this).attr("class"),titleTooltip:d(this).attr("title"),rowspan:d(this).attr("rowspan")?+d(this).attr("rowspan"):undefined,colspan:d(this).attr("colspan")?+d(this).attr("colspan"):undefined},d(this).data()))});v.push(y)});if(!d.isArray(this.options.columns[0])){this.options.columns=[this.options.columns]}this.options.columns=d.extend(true,[],v,this.options.columns);this.columns=[];this.fieldsColumnsIndex=[];i(this.options.columns);d.each(this.options.columns,function(z,y){d.each(y,function(A,B){B=d.extend({},k.COLUMN_DEFAULTS,B);if(typeof B.fieldIndex!=="undefined"){w.columns[B.fieldIndex]=B;w.fieldsColumnsIndex[B.field]=B.fieldIndex}w.options.columns[z][A]=B})});if(this.options.data.length){return}var e=[];this.$el.find(">tbody>tr").each(function(A){var z={};z._id=d(this).attr("id");z._class=d(this).attr("class");z._data=f(d(this).data());d(this).find(">td").each(function(B){var G=d(this),D=+G.attr("colspan")||1,E=+G.attr("rowspan")||1,C,y;for(;e[A]&&e[A][B];B++){}for(C=B;C<B+D;C++){for(y=A;y<A+E;y++){if(!e[y]){e[y]=[]}e[y][C]=true}}var F=w.columns[B].field;z[F]=d(this).html();z["_"+F+"_id"]=d(this).attr("id");z["_"+F+"_class"]=d(this).attr("class");z["_"+F+"_rowspan"]=d(this).attr("rowspan");z["_"+F+"_colspan"]=d(this).attr("colspan");z["_"+F+"_title"]=d(this).attr("title");z["_"+F+"_data"]=f(d(this).data())});x.push(z)});this.options.data=x;if(x.length){this.fromHtml=true}};k.prototype.initHeader=function(){var w=this,e={},v=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]};if(this.options.lineNum){d.each(this.options.columns,function(y,x){d.each(x,function(z,A){if(A.field=="num"){w.lineNumColumn=A;return false}});if(w.lineNumColumn){return false}})}d.each(this.options.columns,function(y,x){v.push("<tr>");if(y===0&&!w.options.cardView&&w.options.detailView){v.push(l('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',w.options.columns.length))}d.each(x,function(E,D){var J="",F="",H="",z="",G=l(' class="%s"',(D["class"]?D["class"]:"")+(D.fixed=="right"?" fixed-column":"")),C=w.options.sortOrder||D.order,B="px",A=D.width;if(D.width!==undefined&&(!w.options.cardView)){if(typeof D.width==="string"){if(D.width.indexOf("%")!==-1){B="%"}}}if(D.width&&typeof D.width==="string"){A=D.width.replace("%","").replace("px","")}F=l("text-align: %s; ",D.halign?D.halign:D.align);H=l("text-align: %s; ",D.align);z=l("vertical-align: %s; ",D.valign);if(typeof D.fieldIndex!=="undefined"){w.header.fields[D.fieldIndex]=D.field;w.header.styles[D.fieldIndex]=H+z;w.header.classes[D.fieldIndex]=G;w.header.formatters[D.fieldIndex]=D.formatter;w.header.events[D.fieldIndex]=D.events;w.header.sorters[D.fieldIndex]=D.sorter;w.header.sortNames[D.fieldIndex]=D.sortName;w.header.cellStyles[D.fieldIndex]=D.cellStyle;w.header.searchables[D.fieldIndex]=D.searchable;if(!D.visible){return}if(w.options.cardView&&(!D.cardVisible)){return}e[D.field]=D}J=w.options.escape?o(D.title):D.title;v.push("<th"+l(' title="%s"',D.titleTooltip),D.checkbox||D.radio?l(' class="bs-checkbox %s"',D["class"]||""):G,l(' style="%s"',F+z),l(' rowspan="%s"',D.rowspan),l(' colspan="%s"',D.colspan),l(' data-field="%s"',D.field),l(" %s",D.resizable?"resizable":""),l(' title="%s"',!D.wrapTitle?(J||"").replace("<span class='ui-grid-required'>*</span>",""):""),E===0&&D.fieldIndex?" data-not-first-th":"",">");var K="";if(typeof D.fieldIndex!=="undefined"){K+=l(" grid-cell-%s-%s",w.index,D.field);if(!D.wrapTitle){K+=" nowrap"}}v.push(l('<div class="th-inner %s ">',K));var I=J;if(D.checkbox){J="";if(!w.options.singleSelect&&w.options.checkboxHeader){J=TagUtils.createCheckbox({name:"btSelectAll"}).toString()}w.header.stateField=D.field}if(D.radio){J="";w.header.stateField=D.field;w.options.singleSelect=true}if(!J&&D.showSelectTitle){J+=I}v.push(J);if(D.sortable){v.push("<i class='sortable icon-sort'></i>")}if(D.helpMessage){v.push("<i class='icon-question' title='"+D.helpMessage+"'></i>")}v.push("</div>");v.push("</th>")});v.push("</tr>")});this.$header.html(v.join(""));this.$header.find("th[data-field]").each(function(x){d(this).data(e[d(this).data("field")])});w.$header.find(".icon-question").each(function(){d(this).tooltip({position:"auto bottom"})});this.$container.off("click",".sortable").on("click",".sortable",function(x){var y=d(this);if(w.options.detailView&&!y.parent().hasClass("bs-checkbox")){if(y.closest(".bootstrap-table")[0]!==w.$container[0]){return false}}w.onSort(x)});this.$header.children().children().off("keypress").on("keypress",function(y){if(d(this).data().sortable){var x=y.keyCode||y.which;if(x==13){w.onSort(y)}}});d(window).off("resize.bootstrap-table."+this.options.tagId);if(!this.options.showHeader||this.options.cardView){this.$header.hide();this.$tableHeader.hide();this.$tableLoading.css("top",0)}else{this.$header.show();this.$tableHeader.show();this.getCaret();d(window).on("resize.bootstrap-table."+this.options.tagId,d.proxy(this.resetWidth,this))}this.$selectAll=this.$header.find('[name="btSelectAll"]');if(this.options.fixedColumns){this.initFixedColumnHeader();this.$selectAll=this.$fixedHeader.find('[name="btSelectAll"]');d.fn.checkbox.util.init(this.$selectAll.parent())}else{d.fn.checkbox.util.init(this.$header.find('[name="btSelectAll"]').parent())}this.$selectAll.off("checked").on("checked",function(){var x=d(this).prop("checked");w[x?"checkAll":"uncheckAll"]();w.updateSelected()});this.initResizeHeader()};k.prototype.initFixedColumnHeader=function(){this.initFixedColumns();if(this.options.leftFixedNumber>0){var y=this,v=this.$header.find("tr").clone();var e=0;if(this.options.lineNum){e++}if(this.options.multiple){e++}v.each(function(){d(this).find("th:gt("+(y.options.leftFixedNumber+e-1)+")").remove()});this.$fixedHeaderColumns.html(v);this.$fixedHeader.show()}else{this.$fixedHeaderColumns.html("")}if(this.options.rightFixedNumber>0){var x=this.$header.find("tr").clone();var w=x.find("td").length-this.options.rightFixedNumber;x.each(function(){d(this).find("th:lt("+w+")").remove()});this.$fixedHeaderColumnsRight.html(x);this.$fixedHeaderRight.show()}else{this.$fixedHeaderColumnsRight.html("")}};k.prototype.initResizeHeader=function(){var w=this,e=d("body"),x={},v=this.$container.find(".fixed-table-header-columns,.fixed-table-body, .fixed-table-header-columns-right").find("th[resizable]");v.on("mousemove",function(B){var A=d(this),y=A.offset().left,z=B.clientX-y;if(A.attr("colspan")>1||A.data("unresize")||x.resizeStart){return}x.allowResize=A.width()-z<=10;e.css("cursor",(x.allowResize?"col-resize":""))}).on("mouseleave",function(){var y=d(this);if(x.resizeStart){return}e.css("cursor","")}).on("mousedown",function(A){var y=d(this);if(x.allowResize){var z=l(".grid-cell-%s-%s",w.index,y.data("field"));A.preventDefault();x.resizeStart=true;x.offset=[A.clientX,A.clientY];if(y.closest(".fixed-table-header-columns").length>0){x.fixed="left"}else{if(y.closest(".fixed-table-header-columns-right").length>0){x.fixed="right"}}w.getCssRule(z,function(C){var B=C.style.width||y.outerWidth();x.rule=C;x.ruleWidth=parseFloat(B);x.minWidth=80})}});d(document).on("mousemove",function(C){if(x.resizeStart){C.preventDefault();if(x.rule){var A=x.ruleWidth+C.clientX-x.offset[0];if(A<x.minWidth){A=x.minWidth}x.rule.style.width=A+"px";var B=w.$body.width()<(w.$tableBody.width()-(w.scrollBarWidth||0));w.$body.toggleClass("table-boder-right",B);if(!w.scrollBarWidth){w.$header.toggleClass("table-boder-right",B)}if(x.fixed=="left"){w.$fixedBody.css({width:w.$fixedHeader.width()})}else{if(x.fixed=="right"){w.$fixedBodyRight.css({width:w.$fixedHeaderRight.width()-w.scrollBarWidth})}}var z=w.$header.outerHeight();w.$el.css("margin-top",-z-1);if(w.options.fixedColumns){var D=w.$tableBody[0].clientHeight;if(w.options.leftFixedNumber>0){var y=w.$fixedHeader.outerHeight();if(z!=y){w.$fixedHeader.find("tr").css("height",z);w.$fixedBody.css({top:z,height:D})}}if(w.options.rightFixedNumber>0){var y=w.$fixedHeaderRight.outerHeight();if(z!=y){w.$fixedHeaderRight.find("tr").css("height",z);w.$fixedBodyRight.css({top:z,height:D})}}}}}}).on("mouseup",function(y){if(x.resizeStart){x={};e.css("cursor","")}})};k.prototype.initFooter=function(){if(!this.options.showFooter||this.options.cardView){this.$tableFooter.hide()}else{this.$tableFooter.show();this.$tableContainer.css("border-bottom","none")}};k.prototype.resizeColumnWidth=function(z){var y=this,z=z||this.$tableContainer.innerWidth(),B=z,e=0,D=0,C=z-(this.options.lineNum?this.lineNumColumn.width:0)-(this.options.multiple?40:0);this.initTableWidth=z;var A=0;d.each(this.columns,function(E,G){if(G.visible){D++;var F=G.width;if(F){if(isNaN(F)){F=Math.floor(C/100*parseFloat(F));F=F>G.minWidth?F:G.minWidth}G.widthCalc=parseInt(F);B-=F}else{e++;A+=G.minWidth}}});if(this.options.bordered){B-=(D-1)}var v=B-A;var w=0;if(e&&B>0){w=Math.floor(B/e)}var x=["<style>"];d.each(this.columns,function(E,H){if(H.visible){var G=H.widthCalc;if(!G){e--;if(AppParam.USE_OPTIMIZED_COLUMN_WIDTH){w=H.minWidth;if(v>0){w+=Math.floor(v/A*H.minWidth)}}var F=e==0?Math.floor(B):w;G=F>H.minWidth?F:H.minWidth;B-=G}x.push(l(".grid-cell-%s-%s{width:%spx}",y.index,H.field,G))}});x.push("<style>");this.$tableHeader.find("style").remove();this.$tableHeader.append(x.join(""))};k.prototype.initData=function(x,w){if(w==="append"){var e=this.options.data.length;this.options.data=this.options.data.concat(x);for(var v=e;v<this.options.data.length;v++){this.options.data[v][this.options.sortIndexName]=v}}else{if(w==="prepend"){var e=x.length;this.options.data=[].concat(x).concat(this.options.data);for(var v=0;v<this.options.data.length;v++){if(typeof this.options.data[v][this.options.sortIndexName]=="undefined"){this.options.data[v][this.options.sortIndexName]=v}else{this.options.data[v][this.options.sortIndexName]+=e}}}else{this.options.data=x||this.options.data;for(var v=0;v<this.options.data.length;v++){this.options.data[v][this.options.sortIndexName]=v}}}this.data=this.options.data;this.initSort()};k.prototype.initSort=function(){var x=this;if(this.options.sortOrder=="both"){this.options.sortName=null;this.data.sort(function(A,z){var B=A[x.options.sortIndexName];var C=z[x.options.sortIndexName];return B==C?0:(B>C?1:-1)});return}var w=this.options.sortName,e=this.options.sortOrder==="desc"?-1:1,v=d.inArray(this.options.sortName,this.header.fields),y=0;if(this.options.customSort!==d.noop){this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder]);return}if(v!==-1){if(this.options.sortStable){d.each(this.data,function(z,A){A._position=z})}this.data.sort(function(A,z){if(x.header.sortNames[v]){w=x.header.sortNames[v]}var C=s(A,w,x.options.escape),D=s(z,w,x.options.escape),B=p(x.header,x.header.sorters[v],[C,D,A,z]);if(B!==undefined){if(x.options.sortStable&&B===0){return A._position-z._position}return e*B}if(C===undefined||C===null){C=""}if(D===undefined||D===null){D=""}if(x.options.sortStable&&C===D){C=A._position;D=z._position;return A._position-z._position}if(d.isNumeric(C)&&d.isNumeric(D)){C=parseFloat(C);D=parseFloat(D);if(C<D){return e*-1}return e}if(C===D){return 0}if(typeof C!=="string"){C=C.toString()}if(C.localeCompare(D)===-1){return e*-1}return e});if(this.options.sortClass!==undefined){clearTimeout(y);y=setTimeout(function(){x.$el.removeClass(x.options.sortClass);var z=x.$header.find(l('[data-field="%s"]',x.options.sortName).index()+1);x.$el.find(l("tr td:nth-child(%s)",z)).addClass(x.options.sortClass)},250)}}};k.prototype.onSort=function(x){var A=x.type==="keypress"?d(x.currentTarget):d(x.currentTarget).closest("th"),z=this.$header.find("th").eq(A.index());this.$header.add(this.$header_).find("span.order").remove();var y=A.data("field");var v="both";if(d(x.currentTarget).hasClass("icon-sort-up")){v="asc"}else{if(d(x.currentTarget).hasClass("icon-sort-down")){v="desc"}}if(!v){v="asc"}else{switch(v){case"both":v="asc";break;case"asc":v="desc";break;case"desc":v="both";break;default:break}}if(this.options.sidePagination==="server"&&this.options.serverSort){var w=v=="both"?true:false;if(this.options.multiSort){if(this.options.sortInfo&&this.options.sortInfo.length){for(var e=0;e<this.options.sortInfo.length;e++){if(y==this.options.sortInfo[e].sortName){this.options.sortInfo.splice(e,1);if(!w){this.options.sortInfo.push({sortName:y,sortOrder:v})}break}if(e==this.options.sortInfo.length-1){this.options.sortInfo.push({sortName:y,sortOrder:v})}}}else{if(!w){this.options.sortInfo=[{sortName:y,sortOrder:v}]}}}else{if(w){this.options.sortInfo=[]}else{this.options.sortInfo=[{sortName:y,sortOrder:v}]}}}this.options.sortName=y;this.options.sortOrder=v;this.trigger("sort",this.options.sortName,this.options.sortOrder);A.add(z).data("order",this.options.sortOrder);if(this.options.sidePagination==="server"&&this.options.serverSort){this.initServer(this.options.silentSort);return}this.getCaret();this.initSort();this.initBody()};k.prototype.initToolbar=function(){var x=this,w=[],z=0,v,y,e=0;if(this.$toolbar.find(".bs-bars").children().length){d("body").append(d(this.options.toolbar))}this.$toolbar.html("");if(typeof this.options.toolbar==="string"||typeof this.options.toolbar==="object"){if(typeof this.options.toolbar==="string"||typeof this.options.toolbar==="object"){d(this.options.toolbar).addClass(l("bs-bars %s-%s",t.pullClass,this.options.toolbarAlign)).appendTo(this.$toolbar)}}w=[l('<div class="columns columns-%s btn-group %s-%s">',this.options.buttonsAlign,t.pullClass,this.options.buttonsAlign)];if(typeof this.options.icons==="string"){this.options.icons=p(null,this.options.icons)}if(this.options.showPaginationSwitch){w.push(l('<button class="btn'+l(" btn-%s",this.options.buttonsClass)+l(" btn-%s",this.options.iconSize)+'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),l('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>")}if(this.options.showFullscreen){this.$toolbar.find('button[name="fullscreen"]').off("click").on("click",d.proxy(this.toggleFullscreen,this))}if(this.options.showRefresh){w.push(l('<button class="btn'+l(" btn-%s",this.options.buttonsClass)+l(" btn-%s",this.options.iconSize)+'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),l('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>")}if(this.options.showToggle){w.push(l('<button class="btn'+l(" btn-%s",this.options.buttonsClass)+l(" btn-%s",this.options.iconSize)+'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),l('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>")}if(this.options.showFullscreen){w.push(l('<button class="btn'+l(" btn-%s",this.options.buttonsClass)+l(" btn-%s",this.options.iconSize)+'" type="button" name="fullscreen" aria-label="fullscreen" title="%s">',this.options.formatFullscreen()),l('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.fullscreen),"</button>")}if(this.options.showColumns){w.push(l('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" aria-label="columns" class="btn'+l(" btn-%s",this.options.buttonsClass)+l(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',l('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",t.toobarDropdowHtml[0]);d.each(this.columns,function(A,B){if(B.radio||B.checkbox){return}if(x.options.cardView&&!B.cardVisible){return}var C=B.visible?' checked="checked"':"";if(B.switchable){w.push(l(t.toobarDropdowItemHtml,l('<input type="checkbox" data-field="%s" value="%s"%s> %s',B.field,A,C,B.title)));e++}});w.push(t.toobarDropdowHtml[1],"</div>")}w.push("</div>");if(this.showToolbar||w.length>2){this.$toolbar.append(w.join(""))}if(this.options.showPaginationSwitch){this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",d.proxy(this.togglePagination,this))}if(this.options.showRefresh){this.$toolbar.find('button[name="refresh"]').off("click").on("click",d.proxy(this.refresh,this))}if(this.options.showToggle){this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){x.toggleView()})}if(this.options.showColumns){v=this.$toolbar.find(".keep-open");if(e<=this.options.minimumCountColumns){v.find("input").prop("disabled",true)}v.find("li").off("click").on("click",function(A){A.stopImmediatePropagation()});v.find("input").off("click").on("click",function(){var A=d(this);x.toggleColumn(d(this).val(),A.prop("checked"),false);x.trigger("column-switch",d(this).data("field"),A.prop("checked"))})}if(this.options.search){w=[];w.push(l('<div class="%s-%s search">',t.pullClass,this.options.searchAlign),l('<input class="form-control'+l(" input-%s",this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>");this.$toolbar.append(w.join(""));y=this.$toolbar.find(".search input");y.off("keyup drop blur").on("keyup drop blur",function(A){if(x.options.searchOnEnterKey&&A.keyCode!==13){return}if(d.inArray(A.keyCode,[37,38,39,40])>-1){return}clearTimeout(z);z=setTimeout(function(){x.onSearch(A)},x.options.searchTimeOut)});if(q()){y.off("mouseup").on("mouseup",function(A){clearTimeout(z);z=setTimeout(function(){x.onSearch(A)},x.options.searchTimeOut)})}}};k.prototype.onSearch=function(e){var v=d.trim(d(e.currentTarget).val());if(this.options.trimOnSearch&&d(e.currentTarget).val()!==v){d(e.currentTarget).val(v)}if(v===this.searchText){return}this.searchText=v;this.options.searchText=v;this.options.pageNumber=1;this.initSearch();if(e.firedByInitSearchText){if(this.options.sidePagination==="client"){this.updatePagination()}}else{this.updatePagination()}this.trigger("search",v)};k.prototype.initSearch=function(){var v=this;if(this.options.sidePagination!=="server"){if(this.options.customSearch!==d.noop){window[this.options.customSearch].apply(this,[this.searchText]);return}var e=this.searchText&&(this.options.escape?o(this.searchText):this.searchText).toLowerCase();var w=d.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=w?d.grep(this.options.data,function(z,y){for(var x in w){if(d.isArray(w[x])&&d.inArray(z[x],w[x])===-1||!d.isArray(w[x])&&z[x]!==w[x]){return false}}return true}):this.options.data;this.data=e?d.grep(this.data,function(D,A){for(var y=0;y<v.header.fields.length;y++){if(!v.header.searchables[y]){continue}var z=d.isNumeric(v.header.fields[y])?parseInt(v.header.fields[y],10):v.header.fields[y];var C=v.columns[v.fieldsColumnsIndex[z]];var E;if(typeof z==="string"){E=D;var B=z.split(".");for(var x=0;x<B.length;x++){E=E[B[x]]}if(C&&C.searchFormatter){E=p(C,v.header.formatters[y],[E,D,A],E)}}else{E=D[z]}if(typeof E==="string"||typeof E==="number"){if(v.options.strictSearch){if((E+"").toLowerCase()===e){return true}}else{if((E+"").toLowerCase().indexOf(e)!==-1){return true}}}}return false}):this.data}};k.prototype.initPagination=function(){if(!this.options.pagination){this.$pagination.hide();return}else{this.$pagination.show()}var z=this,y=[],C=false,x,E,F,I,H,v,G,w=this.getData(),e=this.options.pageList;if(this.options.sidePagination!=="server"){this.options.totalRows=w.length}this.totalPages=0;if(this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows()){this.options.pageSize=this.options.totalRows;C=true}else{if(this.options.pageSize===this.options.totalRows){var B=typeof this.options.pageList==="string"?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;if(d.inArray(this.options.formatAllRows().toLowerCase(),B)>-1){C=true}}}this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1;this.options.totalPages=this.totalPages}if(this.totalPages>0&&this.options.pageNumber>this.totalPages){this.options.pageNumber=this.totalPages}this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1;this.pageTo=this.options.pageNumber*this.options.pageSize;if(this.pageTo>this.options.totalRows){this.pageTo=this.options.totalRows}y.push(l('<div class="%s-%s pagination-detail">',t.pullClass,this.options.paginationDetailHAlign));if(!this.options.onlyInfoPagination){y.push('<span class="page-list">');if(!this.options.simplePage){var D=[l('<span class="btn-group %s">',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?"dropdown":"dropup"),'<button type="button" class="btn'+l(" btn-%s",this.options.buttonsClass)+l(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',C?this.options.formatAllRows():(this.options.pageSize+"条/页"),"</span>",' <span class="caret"></span>',"</button>",t.pageDropdownHtml[0]];if(typeof this.options.pageList==="string"){var A=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");e=[];d.each(A,function(J,K){e.push((K.toUpperCase()===z.options.formatAllRows().toUpperCase()||K.toUpperCase()==="UNLIMITED")?z.options.formatAllRows():+K)})}d.each(e,function(J,K){if(!z.options.smartDisplay||J===0||e[J-1]<z.options.totalRows){var L;if(C){L=K===z.options.formatAllRows()?"active":""}else{L=K===z.options.pageSize?"active":""}D.push(l(t.pageDropdownItemHtml,L,K))}});D.push(t.pageDropdownHtml[1]+"</span>");y.push(D.join(""))}y.push("</span>");y.push("</div>");y.push(l('<div class="%s-%s pagination">',t.pullClass,this.options.paginationHAlign),'<ul class="pagination'+l(" pagination-%s",this.options.iconSize)+'">',l('<li class="page-item page-pre"><a class="page-link" href="#">%s</a></li>',this.options.paginationPreText));if(this.totalPages<5){E=1;F=this.totalPages}else{E=this.options.pageNumber-2;F=E+4;if(E<1){E=1;F=5}if(F>this.totalPages){F=this.totalPages;E=F-4}}if(this.totalPages>=6){if(this.options.pageNumber>=3){y.push(l('<li class="page-item page-first%s">',1===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',1,"</a>","</li>");E++}if(this.options.pageNumber>=4){if(this.options.pageNumber==4||this.totalPages==6||this.totalPages==7){E--}else{y.push('<li class="page-item page-first-separator disabled">','<a class="page-link" href="#">...</a>',"</li>")}F--}}if(this.totalPages>=7){if(this.options.pageNumber>=(this.totalPages-2)){E--}}if(this.totalPages==6){if(this.options.pageNumber>=(this.totalPages-2)){F++}}else{if(this.totalPages>=7){if(this.totalPages==7||this.options.pageNumber>=(this.totalPages-3)){F++}}}for(x=E;x<=F;x++){y.push(l('<li class="page-item%s">',x===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',x,"</a>","</li>")}if(this.totalPages>=8){if(this.options.pageNumber<=(this.totalPages-4)){y.push('<li class="page-item page-last-separator disabled">','<a class="page-link" href="#">...</a>',"</li>")}}if(this.totalPages>=6){if(this.options.pageNumber<=(this.totalPages-3)){y.push(l('<li class="page-item page-last%s">',this.totalPages===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',this.totalPages,"</a>","</li>")}}y.push(l('<li class="page-item page-next"><a class="page-link" href="#">%s</a></li>',this.options.paginationNextText),"</ul>","</div>")}if(!this.options.simplePage){y.push(l('<div class="%s-%s pagination-detail">',t.pullClass,this.options.paginationDetailHAlign),'<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>","</div>")}this.$pagination.html(y.join(""));H=this.$pagination.find(".page-pre");v=this.$pagination.find(".page-next");if(this.totalPages===1){H.addClass("disabled");v.addClass("disabled")}if(!this.options.onlyInfoPagination){I=this.$pagination.find(".page-list a");G=this.$pagination.find(".page-item").not(".page-next, .page-pre");if(this.options.smartDisplay){if(e.length<2||this.options.totalRows<=e[0]){this.$pagination.find("span.page-list").hide()}this.$pagination[this.getData().length?"show":"hide"]()}if(!this.options.paginationLoop){if(this.options.pageNumber===1){H.addClass("disabled")}if(this.options.pageNumber===this.totalPages){v.addClass("disabled")}}if(C){this.options.pageSize=this.options.formatAllRows()}I.off("click").on("click",d.proxy(this.onPageListChange,this));H.off("click").on("click",d.proxy(this.onPagePre,this));v.off("click").on("click",d.proxy(this.onPageNext,this));G.off("click").on("click",d.proxy(this.onPageNumber,this))}};k.prototype.updatePagination=function(e){if(e&&d(e.currentTarget).hasClass("disabled")){return}if(!this.options.maintainSelected){this.resetRows()}this.initPagination();if(this.options.sidePagination==="server"){this.initServer()}else{this.initBody()}this.trigger("page-change",this.options.pageNumber,this.options.pageSize)};k.prototype.onPageListChange=function(e){e.preventDefault();var v=d(e.currentTarget);v.parent().addClass("active").siblings().removeClass("active");this.options.pageSize=v.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+v.text().replace("条/页","");this.$toolbar.find(".page-size").text(this.options.pageSize);this.updatePagination(e);return false};k.prototype.onPagePre=function(e){e.preventDefault();if((this.options.pageNumber-1)===0){this.options.pageNumber=this.options.totalPages}else{this.options.pageNumber--}this.updatePagination(e);return false};k.prototype.onPageNext=function(e){e.preventDefault();if((this.options.pageNumber+1)>this.options.totalPages){this.options.pageNumber=1}else{this.options.pageNumber++}this.updatePagination(e);return false};k.prototype.onPageNumber=function(e){e.preventDefault();if(this.options.pageNumber===+d(e.currentTarget).text()){return}this.options.pageNumber=+d(e.currentTarget).text();this.updatePagination(e);return false};k.prototype.initRow=function(G,B,A,y){var D=this,F,C=[],e={},v=[],x="",z={},E=[];if(d.inArray(G,this.hiddenRows)>-1){return}e=p(this.options,this.options.rowStyle,[G,B],e);if(e&&e.css){for(F in e.css){v.push(F+": "+e.css[F])}}z=p(this.options,this.options.rowAttributes,[G,B],z);if(z){for(F in z){E.push(l('%s="%s"',F,o(z[F])))}}if(G._data&&!d.isEmptyObject(G._data)){d.each(G._data,function(I,H){if(I==="index"){return}x+=l(' data-%s="%s"',I,H)})}var w=e.classes?e.classes+(d.isArray(G)?"":" "+G._class):d.isArray(G)?undefined:G._class;if(D.options.edit&&D.options.editType!="cell"&&G.editable==false){w=w?w+" notedit":"notedit"}C.push("<tr",l(" %s",E.join(" ")),l(' id="%s"',d.isArray(G)?undefined:G._id),l(' class="%s"',w),l(' data-index="%s"',B),l(' data-uniqueid="%s"',G[this.options.uniqueId]),l("%s",x),">");if(this.options.cardView){C.push(l('<td colspan="%s"><div class="card-views">',this.header.fields.length))}if(!this.options.cardView&&this.options.detailView){C.push("<td>");if(p(null,this.options.detailFilter,[B,G])){C.push('<a class="detail-icon" href="#">',l('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),"</a>")}C.push("</td>")}d.each(this.header.fields,function(M,Q){var U="",P=s(G,Q,D.options.escape),R="",O="",I={},V="",N=D.header.classes[M],K="",T="",W="",L="",J=D.columns[M];if(D.fromHtml&&typeof P==="undefined"){if((!J.checkbox)&&(!J.radio)){return}}if(!J.visible){return}if(D.options.cardView&&(!J.cardVisible)){return}if(J.escape){P=o(P)}if(G["_"+Q+"_id"]){V=l(' id="%s"',G["_"+Q+"_id"])}if(G["_"+Q+"_class"]){N=l(' class="%s"',G["_"+Q+"_class"])}if(G["_"+Q+"_rowspan"]){T=l(' rowspan="%s"',G["_"+Q+"_rowspan"])}if(G["_"+Q+"_colspan"]){W=l(' colspan="%s"',G["_"+Q+"_colspan"])}if(G["_"+Q+"_title"]){L=l(' title="%s"',G["_"+Q+"_title"])}I=p(D.header,D.header.cellStyles[M],[P,G,B,Q],I);if(I.classes){N=l(' class="%s"',I.classes+" "+N)}if(I.css){var H=[];for(var S in I.css){H.push(S+": "+I.css[S])}e=l('style="%s"',H.concat(D.header.styles[M]).join("; "))}if(G["_"+Q+"_style"]){e=l('style="%s"',G["_"+Q+"_style"])}e=l('style="%s"',v.concat(D.header.styles[M]).join("; "));R=p(J,D.header.formatters[M],[P,G,B,Q],P);if(R==null||R==undefined){if(!J.checkbox&&!J.radio){R="-"}}if(!J.wrapText&&typeof R=="string"&&R.indexOf("<")==-1){L=l(' title="%s"',R)}if(G["_"+Q+"_data"]&&!d.isEmptyObject(G["_"+Q+"_data"])){d.each(G["_"+Q+"_data"],function(Y,X){if(Y==="index"){return}K+=l(' data-%s="%s"',Y,X)})}if(J.checkbox||J.radio){O=J.checkbox?"checkbox":O;O=J.radio?"radio":O;U=[l(D.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',J["class"]||""),l('<div class="cell grid-cell-%s-%s">',D.index,Q),TagUtils.createCheckbox({name:D.options.selectItemName,type:O,value:G[D.options.idField],checked:R,disabled:!J.checkboxEnabled||(R&&R.disabled)?"disabled":undefined,data:{index:B}}).toString(),D.header.formatters[M]&&typeof R==="string"?R:"","</div>",D.options.cardView?"</div>":"</td>"].join("");G[D.header.stateField]=R===true||(!!P||R&&R.checked)}else{R=typeof R==="undefined"||R===null?D.options.undefinedText:R;U=D.options.cardView?['<div class="card-view">',D.options.showHeader?l('<span class="title" %s>%s</span>',e,h(D.columns,"field","title",Q)):"",l('<span class="value">%s</span>',R),"</div>"].join(""):[l("<td%s %s %s %s %s %s %s>",V,N,e,K,T,W,L),l('<div class="cell grid-cell-%s-%s %s" data-field="%s" style="%s">',D.index,Q,J.wrapText?"":"nowrap",Q,D.options.treeShowField&&D.options.treeShowField==Q?"text-overflow:clip;":""),R,"</div>","</td>"].join("");if(D.options.cardView&&D.options.smartDisplay&&R===""){U='<div class="card-view"></div>'}}C.push(U)});if(this.options.cardView){C.push("</div></td>")}C.push("</tr>");return C.join(" ")};k.prototype.initBody=function(x){var A=this,y=[],v=this.getData();this.trigger("pre-body",v);this.$body=this.$el.find(">tbody");if(!this.$body.length){this.$body=d("<tbody></tbody>").appendTo(this.$el)}if(!this.options.pagination||this.options.sidePagination==="server"){this.pageFrom=1;this.pageTo=v.length}var e=[];var z;for(var w=this.pageFrom-1;w<this.pageTo;w++){var D=v[w];var B=this.initRow(D,w,v,e);z=z||!!B;if(B&&B!==true){e.push(B)}}var e=[];var z;for(var w=this.pageFrom-1;w<this.pageTo;w++){var D=v[w];var B=this.initRow(D,w,v,e);z=z||!!B;if(B&&B!==true){e.push(B)}}var C=A.options.countArr;if(z&&C.length>0){var B=this.initCountRow(v);e.push(B)}if(!z){e.push('<tr class="no-records-found">'+l('<td colspan="%s"><div class="empty-tip">%s</div><div class="placeholder"></div></td>',this.$header.find("th").length,TagUtils.createEmpty({description:A.options.emptyDescription}))+"</tr>")}this.$body.html(e.join(""));if(!x){this.scrollTo(0)}this.$body.off("click dblclick").on("click dblclick","> tr[data-index] > td",function(K){var E=d(this),G=E.parent(),N=A.data[G.data("index")],I=E[0].cellIndex,H=A.getVisibleFields(),L=H[A.options.detailView&&!A.options.cardView?I-1:I],F=A.columns[A.fieldsColumnsIndex[L]],M=s(N,L,A.options.escape);if(E.find(".detail-icon").length){return}A.trigger(K.type==="click"?"click-cell":"dbl-click-cell",L,M,N,E,K);A.trigger(K.type==="click"?"click-row":"dbl-click-row",N,G,L,K);if(K.type==="click"&&A.options.clickToSelect&&F.clickToSelect&&A.options.ignoreClickToSelectOn(K.target)){var J=G.find(".box-control");if(J.length){J[0].click()}}});this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(J){J.preventDefault();var I=d(this),H=I.parent().parent(),F=H.data("index"),K=v[F];if(H.next().is("tr.detail-view")){I.find("i").attr("class",l("%s %s",A.options.iconsPrefix,A.options.icons.detailOpen));A.trigger("collapse-row",F,K,H.next());H.next().remove()}else{I.find("i").attr("class",l("%s %s",A.options.iconsPrefix,A.options.icons.detailClose));H.after(l('<tr class="detail-view"><td colspan="%s"></td></tr>',H.find("td").length));var E=H.next().find("td");var G=p(A.options,A.options.detailFormatter,[F,K,E],"");if(E.length===1){E.append(G)}A.trigger("expand-row",F,K,E)}A.resetView();return false});this.initSelectItem();d.each(this.header.events,function(H,G){if(!G){return}if(typeof G==="string"){G=p(null,G)}var I=A.header.fields[H],E=d.inArray(I,A.getVisibleFields());if(E===-1){return}if(A.options.detailView&&!A.options.cardView){E+=1}for(var F in G){A.$body.find(">tr:not(.no-records-found)").each(function(){var N=d(this),O=N.find(A.options.cardView?".card-view":"td").eq(E),K=F.indexOf(" "),J=F.substring(0,K),L=F.substring(K+1),M=G[F];O.find(L).off(J).on(J,function(R){var P=N.data("index"),S=A.data[P],Q=S[I];M.apply(this,[R,Q,S,P])})})}});this.updateSelected();if(!this.options.hidden){this.resetView()}this.trigger("post-body",v);if(this.options.fixedHorizontalScroll){setTimeout(d.proxy(this.fitScrollbar,this),100)}};k.prototype.initCountRow=function(x){var D=this.options.countArr;var A={editable:false};for(var y=this.pageFrom-1;y<this.pageTo;y++){var E=x[y];if(D.length>0){for(var w=0;w<D.length;w++){var v=D[w];var C=this.$body.find("tr[data-index='"+y+"']").find(".cell[data-field='"+v+"']");if(C&&C.parent().css("display")=="none"){continue}A[v]=parseFloat(A[v]||0)+parseFloat(E[v]||0)}}}var D=this.options.countArr;var z=[l('<tr class="count-row" data-index="%s">',D.length+1)];var e=true;var B=this;d.each(this.header.fields,function(H,K){var L="",J=A[K],I=B.columns[H];if(!I.visible){return}var F=l(' class="cell %s"',(d.browser.msie&&I.fixed=="right"?" fixed-column":""));if(I.type=="numberColumn"&&d.inArray(I.field,D)>-1){var G=get(B.$el).getColumn(I.field).precision;J=NumberUtils.toFixed(parseFloat(J),G);J=NumberUtils.format(J);L=[l('<td %s style="text-align: right;"><strong>',F),J,"</strong></td>"].join("")}else{var J="";if(e&&I.field!="ck"&&I.field!="num"){J="<strong>总计</strong>";e=false}L=[l("<td %s >",F),J,"</td>"].join("")}z.push(L)});z.push("</tr>");return z.join(" ")};k.prototype.fitScrollbar=function(){clearTimeout(this.timeoutScrollbar_);if(this.$el.is(":hidden")){this.timeoutScrollbar_=setTimeout(d.proxy(this.fitScrollbar,this),100);return}d(window).trigger("resize.table.fixed.scrollbar."+this.options.tagId)};k.prototype.initSelectItem=function(){var v=this;this.$selectItem=this.$body.find(l('[name="%s"]',this.options.selectItemName));var e=this.$selectItem.parent();d.fn.checkbox.util.init(e);e.off("checked").on("checked",function(x,w){x.stopImmediatePropagation();var y=d(this).find(":checkbox"),z=v.data[y.data("index")];z[v.header.stateField]=w;if(v.options.singleSelect){v.$selectItem.not(y).each(function(){v.data[d(this).data("index")][v.header.stateField]=false});v.$selectItem.filter(":checked").not(d(this)).prop("checked",false)}v.updateSelected();v.trigger(w?"check":"uncheck",z,y)})};k.prototype.initServer=function(e,A,w){var y=this,z={},v=d.inArray(this.options.sortName,this.header.fields),B={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder},x;if(this.header.sortNames[v]){B.sortName=this.header.sortNames[v]}if(this.options.pagination&&this.options.sidePagination==="server"){B.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize;B.pageNumber=this.options.pageNumber;if(this.options.serverSort){B.sortInfo=this.options.sortInfo}}if(!(w||this.options.url)&&!this.options.ajax){return}if(this.options.queryParamsType==="limit"){B={search:B.searchText,sort:B.sortName,order:B.sortOrder};if(this.options.pagination&&this.options.sidePagination==="server"){B.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1);B.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize;if(B.limit===0){delete B.limit}}}if(!(d.isEmptyObject(this.filterColumnsPartial))){B.filter=JSON.stringify(this.filterColumnsPartial,null)}z=p(this.options,this.options.queryParams,[B],z);d.extend(z,A||{});if(z===false){return}if(!e){this.$container.addClass("loading")}x=d.extend({},p(null,this.options.ajaxOptions),{type:this.options.method,url:w||this.options.url,data:this.options.contentType==="application/json"&&this.options.method==="post"?JSON.stringify(z):z,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(C){C=p(y.options,y.options.responseHandler,[C],C);y.load(C);y.trigger("load-success",C);if(!e){y.$container.removeClass("loading")}},error:function(C){if(y.noThrowError){return}var D=[];if(y.options.sidePagination==="server"){D={};D[y.options.totalField]=0;D[y.options.dataField]=[]}y.load(D);y.trigger("load-error",C.status,C);if(!e){y.$tableLoading.hide()}}});if(this.options.ajax){p(this,this.options.ajax,[x],null)}else{if(this._xhr&&this._xhr.readyState!==4){this.noThrowError=true;this._xhr.abort();this.noThrowError=false}this._xhr=d.ajax(x)}};k.prototype.initSearchText=function(){if(this.options.search){this.searchText="";if(this.options.searchText!==""){var e=this.$toolbar.find(".search input");e.val(this.options.searchText);this.onSearch({currentTarget:e,firedByInitSearchText:true})}}};k.prototype.getCaret=function(){var w=this.$container.find(".fixed-table-header-columns,.fixed-table-header-columns-right,.fixed-table-body").find("th[data-field]");if(this.options.sidePagination==="server"&&this.options.serverSort&&this.options.multiSort){var y=[];if(this.options.sortInfo){for(var v=0;v<this.options.sortInfo.length;v++){y.push(this.options.sortInfo[v].sortName)}}w.each(function(A,C){var D=d(C).data("field");var z="icon-sort";if(y.indexOf(D)!=-1){var B=d(C).data("order");switch(B){case"asc":z="icon-sort-up";break;case"desc":z="icon-sort-down";break;default:break}}d(C).find("i.sortable").removeClass("icon-sort icon-sort-down icon-sort-up").addClass(z)})}else{var x=this,e="icon-sort";switch(x.options.sortOrder){case"asc":e="icon-sort-up";break;case"desc":e="icon-sort-down";break;default:break}d.each(this.$container.find(".fixed-table-header-columns,.fixed-table-header-columns-right,.fixed-table-body").find("th[data-field]"),function(z,B){var A=d(B).data("field")===x.options.sortName;d(B).find("i.sortable").removeClass("icon-sort icon-sort-down icon-sort-up").addClass(A?e:"icon-sort");if(!A){d(B).data("order","both")}})}};k.prototype.updateSelected=function(){var e=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",e);var v=this;this.$selectItem.each(function(){var w=d(this).closest("tr");w[d(this).prop("checked")?"addClass":"removeClass"]("selected");if(v.options.fixedColumns){v.$tableBody.find("tbody").find("tr:eq("+w.index()+")")[d(this).prop("checked")?"addClass":"removeClass"]("selected");if(v.options.rightFixedNumber>0){v.$fixedBodyRight.find("tbody").find("tr:eq("+w.index()+")")[d(this).prop("checked")?"addClass":"removeClass"]("selected")}}})};k.prototype.updateRows=function(){var e=this;this.$selectItem.each(function(){e.data[d(this).data("index")][e.header.stateField]=d(this).prop("checked")})};k.prototype.resetRows=function(){var e=this;d.each(this.data,function(v,w){e.$selectAll.prop("checked",false);e.$selectItem.prop("checked",false);if(e.header.stateField){w[e.header.stateField]=false}});this.initHiddenRows()};k.prototype.trigger=function(v){var e=Array.prototype.slice.call(arguments,1);v+=".bs.table";this.options[k.EVENTS[v]].apply(this.options,e);this.$el.trigger(d.Event(v),e);this.options.onAll(v,e);this.$el.trigger(d.Event("all.bs.table"),[v,e])};k.prototype.resetHeader=function(){clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(d.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)};var c=40;k.prototype.resetLineNumWidth=function(){if(this.options.lineNum===false){return false}var v=this.lineNumColumn.width;var e=this.getData().length;if(this.options.pagination){e=this.options.pageSize*this.options.pageNumber}var w=(e+"").length*12;this.lineNumColumn.width=w>c?w:c;return v!=w};k.prototype.fitHeader=function(){var w=this,x,B,C;if(w.$el.is(":hidden")){w.timeoutId_=setTimeout(d.proxy(w.fitHeader,w),100);return}x=this.$tableBody.get(0);B=d(":focus");if(B.length>0){var D=B.parents("th");if(D.length>0){var E=D.attr("data-field");if(E!==undefined){var v=this.$header.find("[data-field='"+E+"']");if(v.length>0){v.find(":input").addClass("focus-temp")}}}}this.$header_=this.$header.clone(true,true);this.$tableHeader.find("table").html(this.$header_).attr("class",this.$el.attr("class"));var y=this.$tableContainer.innerWidth();if(x.offsetWidth>x.clientWidth){this.scrollBarWidth=j();this.$header_.find("tr:eq(0)").append('<th rowspan="'+this.options.columns.length+'" class="grid-patch"><div style="width:'+this.scrollBarWidth+'px" class="th-inner"></div></th>');if(this.options.fixedColumns&&this.options.rightFixedNumber>0){var e=this.$fixedHeaderRight.find("tr:eq(0)");if(!e.find("th.grid-patch").length){this.$fixedHeaderRight.find("tr:eq(0)").append('<th rowspan="'+this.options.columns.length+'" class="grid-patch"><div style="width:'+this.scrollBarWidth+'px" class="th-inner"></div></th>')}}y-=this.scrollBarWidth}else{if(this.scrollBarWidth){this.scrollBarWidth=0;this.$header_.find(".grid-patch").remove();if(this.options.fixedColumns&&this.options.rightFixedNumber>0){this.$fixedHeaderRight.find(".grid-patch").remove()}}}if(this.resetLineNumWidth()||y!=this.initTableWidth||this.options.resizeColumnWidth){this.resizeColumnWidth(y);this.options.resizeColumnWidth=false}this.$el.css("margin-top",-this.$header.outerHeight()-1);this.$selectAll_=this.$header_.find('[name="btSelectAll"]');C=d(".focus-temp:visible:eq(0)");if(C.length>0){C.focus();this.$header.find(".focus-temp").removeClass("focus-temp")}this.$header.find("th[data-field]").each(function(F){w.$header_.find(l('th[data-field="%s"]',d(this).data("field"))).data(d(this).data())});var A=this.getVisibleFields(),z=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(G){var H=d(this),F=G;if(w.options.detailView&&!w.options.cardView){if(G===0){w.$header_.find("th.detail").find(".fht-cell").width(H.innerWidth())}F=G-1}});this.horizontalScroll();this.trigger("post-header")};k.prototype.getCssRule=function(z,y){var w=this,v=w.$tableHeader.find("style")[0],e=v.sheet||v.styleSheet||{},x=e.cssRules||e.rules;d.each(x,function(A,B){if(B.selectorText===z){return y(B),true}})};k.prototype.resetFooter=function(){this.$tableFooter.html(l("<div style='text-align: right;'>共%s条数据</div>",this.getData().length));this.$tableFooter.show();clearTimeout(this.timeoutFooter_);this.timeoutFooter_=setTimeout(d.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0)};k.prototype.fitFooter=function(){clearTimeout(this.timeoutFooter_);if(this.$el.is(":hidden")){this.timeoutFooter_=setTimeout(d.proxy(this.fitFooter,this),100);return}this.$tableFooter.css("width",this.$tableBody.innerWidth()+2)};k.prototype.horizontalScroll=function(){var e=this;e.trigger("scroll-body");this.$tableBody.off("scroll.grid").on("scroll.grid",function(){if(e.options.showHeader){e.$tableHeader.scrollLeft(d(this).scrollLeft())}if(e.options.showFooter&&!e.options.cardView){e.$tableFooter.scrollLeft(d(this).scrollLeft())}})};k.prototype.toggleColumn=function(v,x,z){if(v===-1){return}var w=this.columns[v];if(w.visible==x){return}if(this.options.fixedColumns){if(w.fixed){var e=-1;if(x){e=1}if(w.fixed=="left"){this.options.leftFixedNumber+=e}else{this.options.rightFixedNumber+=e}}}this.options.resizeColumnWidth=true;w.visible=x;this.initHeader();this.initSearch();this.initPagination();this.initBody();this.fitHeader();if(this.options.showColumns){var y=this.$toolbar.find(".keep-open input").prop("disabled",false);if(z){y.filter(l('[value="%s"]',v)).prop("checked",x)}if(y.filter(":checked").length<=this.options.minimumCountColumns){y.filter(":checked").prop("disabled",true)}}};k.prototype.getVisibleFields=function(){var v=this,e=[];d.each(this.header.fields,function(w,y){var x=v.columns[v.fieldsColumnsIndex[y]];if(!x.visible){return}e.push(y)});return e};k.prototype.resetView=function(z){if(this.options.viewHeight=="fill"){this.options.height=a(this.$container,this.options.minHeight,this.options.maxHeight)}else{if(this.options.viewHeight=="auto"){this.options.height=null}else{this.options.height=this.options.viewHeight}}if(z&&z.height){this.options.height=z.height}this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length);if(this.options.cardView){this.$el.css("margin-top","0");this.$tableContainer.css("padding-bottom","0");this.$tableFooter.hide();return}if(this.options.showHeader){this.$tableHeader.show();this.resetHeader()}else{this.$tableHeader.hide();this.trigger("post-header")}if(this.options.showFooter){this.resetFooter()}if(this.options.footer){var v=this.getData().length;if(v){this.$container.find(".ez-table-footer").html(l("共%s条数据",v)).show()}else{this.$container.find(".ez-table-footer").hide()}}if(this.options.height){var y=this.$tableTitle.outerHeight(true)||0,x=this.$toolbar.outerHeight(true)||0,A=this.$pagination.outerHeight(true),w=this.$container.find(".ez-table-footer").outerHeight(true)||0,e=this.options.height-y-x-A-w;if(this.options.viewHeight=="fill"&&!d.browser.msie){this.$tableContainer.css("max-height",e+"px")}else{this.$tableContainer.css("height",e+"px")}}else{if(this.options.maxHeight){this.$tableContainer.css("max-height",this.options.maxHeight+"px")}if(this.options.minHeight){this.$tableContainer.css("min-height",this.options.minHeight+"px")}}this.getCaret();this.trigger("reset-view")};k.prototype.getData=function(v){var e=this.options.data;if(this.searchText||this.options.sortName||!d.isEmptyObject(this.filterColumns)||!d.isEmptyObject(this.filterColumnsPartial)){e=this.data}if(v){return e.slice(this.pageFrom-1,this.pageTo)}return e};k.prototype.load=function(v){var e=false;if(!v){v=[]}if(this.options.pagination&&this.options.sidePagination==="server"){this.options.totalRows=v[this.options.totalField];e=v.fixedScroll;v=v[this.options.dataField]}else{if(!d.isArray(v)){e=v.fixedScroll;v=v.data}}this.initData(v);this.initSearch();this.initPagination();this.initBody(e)};k.prototype.append=function(e){this.initData(e,"append");this.initSearch();this.initPagination();this.initBody(true)};k.prototype.prepend=function(e){this.initData(e,"prepend");this.initSearch();this.initPagination();this.initBody(true)};k.prototype.remove=function(z){var v=this.options.data.length,w,y;if(!isNaN(z)){this.options.data.splice(z,1)}else{if(d.isArray(z)){var e=z.sort(function(B,A){return B-A});var x=e.length;for(w=x-1;w>=0;w--){if(!isNaN(e[w])){this.options.data.splice(e[w],1)}}}else{if(!z.hasOwnProperty("field")||!z.hasOwnProperty("values")){return}for(w=v-1;w>=0;w--){y=this.options.data[w];if(!y.hasOwnProperty(z.field)){continue}if(d.inArray(y[z.field],z.values)!==-1){this.options.data.splice(w,1);if(this.options.sidePagination==="server"){this.options.totalRows-=1}}}}}if(v===this.options.data.length){return}this.initData();this.initSearch();this.initPagination();this.initSort();this.initBody(true)};k.prototype.removeAll=function(){if(this.options.data.length>0){this.options.data.splice(0,this.options.data.length);this.initSearch();this.initPagination();this.initBody(true)}};k.prototype.getRowByUniqueId=function(A){var z=this.options.uniqueId,e=this.options.data.length,v=null,w,y,x;for(w=e-1;w>=0;w--){y=this.options.data[w];if(y.hasOwnProperty(z)){x=y[z]}else{if(y._data.hasOwnProperty(z)){x=y._data[z]}else{continue}}if(typeof x==="string"){A=A.toString()}else{if(typeof x==="number"){if((Number(x)===x)&&(x%1===0)){A=parseInt(A)}else{if((x===Number(x))&&(x!==0)){A=parseFloat(A)}}}}if(x===A){v=y;break}}return v};k.prototype.removeByUniqueId=function(w){var e=this.options.data.length,v=this.getRowByUniqueId(w);if(v){this.options.data.splice(this.options.data.indexOf(v),1)}if(e===this.options.data.length){return}this.initSearch();this.initPagination();this.initBody(true)};k.prototype.updateByUniqueId=function(w){var e=this;var v=d.isArray(w)?w:[w];d.each(v,function(x,z){var y;if(!z.hasOwnProperty("id")||!z.hasOwnProperty("row")){return}y=d.inArray(e.getRowByUniqueId(z.id),e.options.data);if(y===-1){return}d.extend(e.options.data[y],z.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(true)};k.prototype.refreshColumnTitle=function(e){if(!e.hasOwnProperty("field")||!e.hasOwnProperty("title")){return}this.columns[this.fieldsColumnsIndex[e.field]].title=this.options.escape?o(e.title):e.title;if(this.columns[this.fieldsColumnsIndex[e.field]].visible){var v=this.options.height!==undefined?this.$tableHeader:this.$header;v.find("th[data-field]").each(function(w){if(d(this).data("field")===e.field){d(d(this).find(".th-inner")[0]).text(e.title);return false}})}};k.prototype.insertRow=function(v){if(!v.hasOwnProperty("index")||!v.hasOwnProperty("row")){return}for(var e=0;e<this.options.data.length;e++){if(this.options.data[e][this.options.sortIndexName]>=v.index){this.options.data[e][this.options.sortIndexName]++}}v.row[this.options.sortIndexName]=v.index;this.options.data.splice(v.index,0,v.row);this.initSearch();this.initPagination();this.initSort();this.initBody(true)};k.prototype.updateRow=function(x){var v=this;var w=d.isArray(x)?x:[x];d.each(w,function(y,z){if(!z.hasOwnProperty("index")||!z.hasOwnProperty("row")){return}z.row=d.extend(v.options.data[z.index],z.row);v.$body.find("tr:eq("+z.index+")").find("td").each(function(){var A=d(this).find(">div").data("field");if(d(this).attr("rowspan")){z.row["_"+A+"_rowspan"]=d(this).attr("rowspan")}if(d(this).attr("colspan")){z.row["_"+A+"_colspan"]=d(this).attr("colspan")}if(d(this).attr("style")){z.row["_"+A+"_style"]=d(this).attr("style")}})});this.$body.find("tr:eq("+x.index+")").replaceWith(this.initRow(x.row,x.index));var e=this.getData();get(this.$el).autoMergeCell(e);this.initSelectItem()};k.prototype.updateCountRow=function(){if(this.options.countArr.length>0){var e=this.getData();var v=this.$body.find("tr.count-row");v.replaceWith(d(this.initCountRow(e)))}};k.prototype.initHiddenRows=function(){this.hiddenRows=[]};k.prototype.showRow=function(e){this.toggleRow(e,true)};k.prototype.hideRow=function(e){this.toggleRow(e,false)};k.prototype.toggleRow=function(x,w){var v,e;if(x.hasOwnProperty("index")){v=this.getData()[x.index]}else{if(x.hasOwnProperty("uniqueId")){v=this.getRowByUniqueId(x.uniqueId)}}if(!v){return}e=d.inArray(v,this.hiddenRows);if(!w&&e===-1){this.hiddenRows.push(v)}else{if(w&&e>-1){this.hiddenRows.splice(e,1)}}this.initBody(true)};k.prototype.getHiddenRows=function(e){var v=this,x=this.getData(),w=[];d.each(x,function(y,z){if(d.inArray(z,v.hiddenRows)>-1){w.push(z)}});this.hiddenRows=w;return w};k.prototype.mergeCells=function(C){var B=C.index,w=d.inArray(C.field,this.getVisibleFields()),x=C.rowspan||1,v=C.colspan||1,z,y,A=this.$body.find(">tr"),e;if(this.options.detailView&&!this.options.cardView){w+=1}e=A.eq(B).find(">td").eq(w);if(B<0||w<0||B>=this.data.length){return}for(z=B;z<B+x;z++){for(y=w;y<w+v;y++){A.eq(z).find(">td").eq(y).hide()}}e.attr("rowspan",x).attr("colspan",v).show()};k.prototype.updateCell=function(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("field")||!e.hasOwnProperty("value")){return}this.data[e.index][e.field]=e.value;if(e.reinit===false){return}this.initSort();this.initBody(true)};k.prototype.updateCellById=function(w){var e=this;if(!w.hasOwnProperty("id")||!w.hasOwnProperty("field")||!w.hasOwnProperty("value")){return}var v=d.isArray(w)?w:[w];d.each(v,function(x,z){var y;y=d.inArray(e.getRowByUniqueId(z.id),e.options.data);if(y===-1){return}e.data[y][z.field]=z.value});if(w.reinit===false){return}this.initSort();this.initBody(true)};k.prototype.getOptions=function(){return this.options};k.prototype.getSelections=function(){var e=this;return d.grep(this.options.data,function(v){return v[e.header.stateField]===true})};k.prototype.getAllSelections=function(){var e=this;return d.grep(this.options.data,function(v){return v[e.header.stateField]})};k.prototype.checkAll=function(){this.checkAll_(true)};k.prototype.uncheckAll=function(){this.checkAll_(false)};k.prototype.checkInvert=function(){var v=this;var w=v.$selectItem.filter(":enabled");var e=w.filter(":checked");w.each(function(){d(this).prop("checked",!d(this).prop("checked"))});v.updateRows();v.updateSelected();v.trigger("uncheck-some",e);e=v.getSelections();v.trigger("check-some",e)};k.prototype.checkAll_=function(e){var v;if(!e){v=this.getSelections()}this.$selectAll.add(this.$selectAll_).prop("checked",e);this.$selectItem.filter(":enabled").prop("checked",e);this.updateRows();if(e){v=this.getSelections()}this.trigger(e?"check-all":"uncheck-all",v)};k.prototype.check=function(e){this.check_(true,e)};k.prototype.uncheck=function(e){this.check_(false,e)};k.prototype.check_=function(w,e){var v=this.$selectItem.filter(l('[data-index="%s"]',e)).prop("checked",w);this.data[e][this.header.stateField]=w;this.updateSelected();this.trigger(w?"check":"uncheck",this.data[e],v)};k.prototype.checkBy=function(e){this.checkBy_(true,e)};k.prototype.uncheckBy=function(e){this.checkBy_(false,e)};k.prototype.checkBy_=function(v,x){if(!x.hasOwnProperty("field")||!x.hasOwnProperty("values")){return}var e=this,w=[];d.each(this.options.data,function(y,A){if(!A.hasOwnProperty(x.field)){return false}if(d.inArray(A[x.field],x.values)!==-1){var z=e.$selectItem.filter(":enabled").filter(l('[data-index="%s"]',y)).prop("checked",v);A[e.header.stateField]=v;w.push(A);e.trigger(v?"check":"uncheck",A,z)}});this.updateSelected();this.trigger(v?"check-some":"uncheck-some",w)};k.prototype.destroy=function(){this.$el.insertBefore(this.$container);d(this.options.toolbar).insertBefore(this.$el);this.$container.next().remove();this.$container.remove();this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")};k.prototype.showLoading=function(){this.$tableLoading.show()};k.prototype.hideLoading=function(){this.$tableLoading.hide()};k.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var e=this.$toolbar.find('button[name="paginationSwitch"] i');if(this.options.pagination){e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown)}else{e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp)}this.updatePagination()};k.prototype.toggleFullscreen=function(){this.$el.closest(".bootstrap-table").toggleClass("fullscreen")};k.prototype.refresh=function(e){if(e&&e.url){this.options.url=e.url}if(e&&e.pageNumber){this.options.pageNumber=e.pageNumber}if(e&&e.pageSize){this.options.pageSize=e.pageSize}if(this.options.pageNumber){this.options.pageNumber=1}this.initServer(e&&e.silent,e&&e.query,e&&e.url);this.trigger("refresh",e)};k.prototype.resetWidth=function(){if(this.options.showHeader&&this.options.height){this.fitHeader()}if(this.options.showFooter&&!this.options.cardView){this.fitFooter()}if(this.options.viewHeight&&isNaN(this.options.viewHeight)){this.resetView()}};k.prototype.showColumn=function(e){this.toggleColumn(this.fieldsColumnsIndex[e],true,true)};k.prototype.filterColumns=function(e){var w,z;for(var x=0;x<e.length;x++){w=this.fieldsColumnsIndex[e[x].id];if(w===-1){return}z=!e[x].hidden;var y=this.columns[w];if(this.options.fixedColumns){if(y.fixed&&y.visible!=z){var v=-1;if(z){v=1}if(y.fixed=="left"){this.options.leftFixedNumber+=v}else{this.options.rightFixedNumber+=v}}}y.visible=z;if(this.options.showColumns){var A=this.$toolbar.find(".keep-open input").prop("disabled",false);A.filter(l('[value="%s"]',w)).prop("checked",z);if(A.filter(":checked").length<=this.options.minimumCountColumns){A.filter(":checked").prop("disabled",true)}}}this.options.resizeColumnWidth=true;this.initHeader();this.initSearch();this.initPagination();this.initBody();this.fitHeader()};k.prototype.hideColumn=function(e){this.toggleColumn(this.fieldsColumnsIndex[e],false,true)};k.prototype.getHiddenColumns=function(){return d.grep(this.columns,function(e){return !e.visible})};k.prototype.getVisibleColumns=function(){return d.grep(this.columns,function(e){return e.visible})};k.prototype.toggleAllColumns=function(v){var e=this;d.each(this.columns,function(x,y){e.columns[x].visible=v});this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var w=this.$toolbar.find(".keep-open input").prop("disabled",false);if(w.filter(":checked").length<=this.options.minimumCountColumns){w.filter(":checked").prop("disabled",true)}}};k.prototype.showAllColumns=function(){this.toggleAllColumns(true)};k.prototype.hideAllColumns=function(){this.toggleAllColumns(false)};k.prototype.filterBy=function(e){this.filterColumns=d.isEmptyObject(e)?{}:e;this.options.pageNumber=1;this.initSearch();this.updatePagination()};k.prototype.scrollTo=function(e){if(typeof e==="string"){e=e==="bottom"?this.$tableBody[0].scrollHeight:0}if(typeof e==="number"){this.$tableBody.scrollTop(e)}if(typeof e==="undefined"){return this.$tableBody.scrollTop()}};k.prototype.getScrollPosition=function(){return this.scrollTo()};k.prototype.selectPage=function(e){if(e>0&&e<=this.options.totalPages){this.options.pageNumber=e;this.updatePagination()}};k.prototype.prevPage=function(){if(this.options.pageNumber>1){this.options.pageNumber--;this.updatePagination()}};k.prototype.nextPage=function(){if(this.options.pageNumber<this.options.totalPages){this.options.pageNumber++;this.updatePagination()}};k.prototype.toggleView=function(){this.options.cardView=!this.options.cardView;this.initHeader();this.initBody();this.trigger("toggle",this.options.cardView)};k.prototype.refreshOptions=function(e){if(n(this.options,e,true)){return}this.options=d.extend(this.options,e);this.trigger("refresh-options",this.options);this.destroy();this.init()};k.prototype.resetSearch=function(v){var e=this.$toolbar.find(".search input");e.val(v||"");this.onSearch({currentTarget:e})};k.prototype.expandRow_=function(v,e){var w=this.$body.find(l('> tr[data-index="%s"]',e));if(w.next().is("tr.detail-view")===(v?false:true)){w.find("> td > .detail-icon").click()}};k.prototype.expandRow=function(e){this.expandRow_(true,e)};k.prototype.collapseRow=function(e){this.expandRow_(false,e)};k.prototype.expandAllRows=function(e){if(e){var z=this.$body.find(l('> tr[data-index="%s"]',0)),A=this,x=null,y=false,v=-1;if(!z.next().is("tr.detail-view")){z.find("> td > .detail-icon").click();y=true}else{if(!z.next().next().is("tr.detail-view")){z.next().find(".detail-icon").click();y=true}}if(y){try{v=setInterval(function(){x=A.$body.find("tr.detail-view").last().find(".detail-icon");if(x.length>0){x.click()}else{clearInterval(v)}},1)}catch(C){clearInterval(v)}}}else{var B=this.$body.children();for(var w=0;w<B.length;w++){this.expandRow_(true,d(B[w]).data("index"))}}};k.prototype.collapseAllRows=function(v){if(v){this.expandRow_(false,0)}else{var e=this.$body.children();for(var w=0;w<e.length;w++){this.expandRow_(false,d(e[w]).data("index"))}}};k.prototype.updateFormatText=function(e,v){if(this.options[l("format%s",e)]){if(typeof v==="string"){this.options[l("format%s",e)]=function(){return v}}else{if(typeof v==="function"){this.options[l("format%s",e)]=v}}}this.initToolbar();this.initPagination();this.initBody()};var g=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","updateCountRow","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","refreshColumnTitle","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","filterColumns","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText","updateCellById","resizeColumnWidth"];d.fn.bootstrapTable=function(v){var w,e=Array.prototype.slice.call(arguments,1);this.each(function(){var z=d(this),y=z.data("bootstrap.table"),x=d.extend({},k.DEFAULTS,z.data(),typeof v==="object"&&v);if(typeof v==="string"){if(d.inArray(v,g)<0){throw new Error("Unknown method: "+v)}if(!y){return}w=y[v].apply(y,e);if(v==="destroy"){z.removeData("bootstrap.table")}}if(!y){z.data("bootstrap.table",(y=new k(this,x)))}});return typeof w==="undefined"?this:w};d.fn.bootstrapTable.Constructor=k;d.fn.bootstrapTable.defaults=k.DEFAULTS;d.fn.bootstrapTable.columnDefaults=k.COLUMN_DEFAULTS;d.fn.bootstrapTable.locales=k.LOCALES;d.fn.bootstrapTable.methods=g;d.fn.bootstrapTable.utils={bootstrapVersion:b,sprintf:l,compareObjects:n,calculateObjectValue:p,getItemField:s,objectKeys:u,isIEBrowser:q,escapeHTML:o}})(jQuery);