(function(d){d.extend(d.fn.bootstrapTable.defaults,{fixedColumns:false,fixedNumber:1});var a=d.fn.bootstrapTable.Constructor,b=a.prototype.initBody,c=a.prototype.fitHeader;a.prototype.initFixedColumns=function(){this.timeoutHeaderColumns_=0;if(!this.$fixedHeader){this.$fixedHeader=d(['<div class="fixed-table-header-columns">',"<table>","<thead></thead>","</table>","</div>"].join(""));this.$fixedHeader.find("table").attr("class",this.$el.attr("class"));this.$fixedHeaderColumns=this.$fixedHeader.find("thead");this.$tableHeader.before(this.$fixedHeader)}if(!this.$fixedHeaderRight){this.$fixedHeaderRight=d(['<div class="fixed-table-header-columns-right">',"<table>","<thead></thead>","</table>","</div>"].join(""));this.$fixedHeaderRight.find("table").attr("class",this.$el.attr("class"));this.$fixedHeaderColumnsRight=this.$fixedHeaderRight.find("thead");this.$tableHeader.before(this.$fixedHeaderRight)}this.timeoutBodyColumns_=0;if(!this.$fixedBody){this.$fixedBody=d(['<div class="fixed-table-body-columns"><div class="fixed-table-body-inner">',"<table>","<tbody></tbody>","</table>","</div></div>"].join(""));this.$fixedBody.find("table").attr("class",this.$el.attr("class"));this.$fixedBodyColumns=this.$fixedBody.find("tbody");this.$tableBody.before(this.$fixedBody);this.$fixedBodyInner=this.$fixedBody.find(".fixed-table-body-inner")}if(!this.$fixedBodyRight){this.$fixedBodyRight=d(['<div class="fixed-table-body-columns-right"><div class="fixed-table-body-inner">',"<table>","<tbody></tbody>","</table>","</div></div>"].join(""));this.$fixedBodyRight.find("table").attr("class",this.$el.attr("class"));this.$fixedBodyColumnsRight=this.$fixedBodyRight.find("tbody");this.$tableBody.before(this.$fixedBodyRight);this.$fixedBodyInnerRight=this.$fixedBodyRight.find(".fixed-table-body-inner")}};a.prototype.initBody=function(){b.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.fixedColumns){return}this.$fixedBodyColumns.html("");this.$fixedBodyColumnsRight.html("");if(this.options.leftFixedNumber<=0&&this.options.rightFixedNumber<=0){return}var h=this,j=0;this.$body.find("> tr[data-index]").each(function(){var o=d(this).clone(true),p=o.find("td");var m=h.options.leftFixedNumber;if(h.options.lineNum){m++}if(h.options.multiple){m++}if(j>0){--m;--j}o.find("td:gt("+(m-1)+")").remove();h.$fixedBodyColumns.append(o);if(p.eq(0).attr("rowspan")){j=p.eq(0).attr("rowspan")-1}if(h.options.rightFixedNumber>0){var l=d(this).clone(true);var n=l.find("td").length-h.options.rightFixedNumber;l.find("td:lt("+n+")").remove();h.$fixedBodyColumnsRight.append(l)}});this.$fixedBodyColumns.off("click dblclick").on("click dblclick","> tr[data-index] > td",function(o){var p=d(this);if(p.find(".detail-icon").length){return}var n=p.parent(),q=n.data("index"),m=p[0].cellIndex;h.$body.find("tr:eq("+q+")").find("td:eq("+m+")").click();if(o.type==="click"&&h.options.clickToSelect){var l=n.find(sprintf('[name="%s"]',h.options.selectItemName));if(l.length){l[0].click()}}});this.$selectItem=this.$fixedBody.find(sprintf('[name="%s"]',this.options.selectItemName));var f=this.$selectItem.parent();d.fn.checkbox.util.init(f);f.off("checked").on("checked",function(m,l){m.stopImmediatePropagation();var n=d(this).find(":checkbox"),o=h.data[n.data("index")];if(d(this).is(":radio")||h.options.singleSelect){d.each(h.options.data,function(p,q){q[h.header.stateField]=false})}o[h.header.stateField]=l;if(h.options.singleSelect){h.$selectItem.not(this).each(function(){h.data[d(this).data("index")][h.header.stateField]=false});h.$selectItem.filter(":checked").not(this).prop("checked",false)}h.updateSelected();h.trigger(l?"check":"uncheck",o,n)});if(this.treeEnable){if(this.options.leftFixedNumber){var i=this.$fixedBody.find("table").data("settings");if(!i){this.$fixedBody.find("table").data("settings",this.$el.data("settings"))}}if(this.options.rightFixedNumber){var i=this.$fixedBodyRight.find("table").data("settings");if(!i){this.$fixedBodyRight.find("table").data("settings",this.$el.data("settings"))}}var g=this.columns[this.fieldsColumnsIndex[this.options.treeShowField]].fixed;switch(g){case"left":this.$fixedBody.find(".treegrid-expander").on("click",function(){h.$body.find("tr:eq("+d(this).closest("tr").index()+") .treegrid-expander").click();if(h.options.rightFixedNumber){h.$fixedBodyRight.find("tr:eq("+d(this).closest("tr").index()+")").treegrid("toggle")}});break;case"right":this.$fixedBodyRight.find(".treegrid-expander").on("click",function(){h.$body.find("tr:eq("+d(this).closest("tr").index()+") .treegrid-expander").click();if(h.options.leftFixedNumber){h.$fixedBody.find("tr:eq("+d(this).closest("tr").index()+")").treegrid("toggle")}});break;default:h.$body.find(".treegrid-expander").on("click",function(){if(h.options.leftFixedNumber){h.$fixedBody.find("tr:eq("+d(this).closest("tr").index()+")").treegrid("toggle")}if(h.options.rightFixedNumber){h.$fixedBodyRight.find("tr:eq("+d(this).closest("tr").index()+")").treegrid("toggle")}});break}}var e=get(this.$el);var k=this.$fixedBody.find(".table-dropdown-btn");k.each(function(){var n=d(this).data();var l=k.filter("[data-items_proxy='"+n.items_proxy+"']");var o=false;if(l.length>1){o=true}var m=HtmlTag.getProxyValue(n.items_proxy,o);d(this).attr("data-items_proxy",null);var p=d(this).closest("tr");n=d.extend({},n,{textField:"text",items:m,menuContainer:"body",onClick:function(s){var q=s.data.fnIndex;if(typeof q!="undefined"){var r=e.btnEvents[q],t=p.data("index"),u=e.getRow(p);if(this.$elem.is(".button-column")){return e.exec(r,[u,t,e,p])}}}});d(this)["dropdown"](n)})};a.prototype.fitHeader=function(){c.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.fixedColumns){return}var e=this.$header.find("tr").get(0).getBoundingClientRect().height;this.$fixedHeaderColumns.find("tr").css("height",e);this.$fixedHeaderColumnsRight.find("tr").css("height",e);clearTimeout(this.timeoutBodyColumns_);this.timeoutBodyColumns_=setTimeout(d.proxy(this.fitBodyColumns,this),this.$el.is(":hidden")?100:0)};a.prototype.fitBodyColumns=function(){var f=this.options.leftFixedNumber>0;var h=this.options.rightFixedNumber>0;if(!f&&!h){this.$fixedBody.hide();this.$fixedBodyRight.hide();return}if(!this.$body.find("> tr[data-index]").length){this.$fixedBody.hide();this.$fixedBodyRight.hide();return}var g=this,i=this.$header.get(0).getBoundingClientRect().height+1,e=this.$tableBody[0].clientHeight;this.$body.find("> tr").each(function(j){var k=this.getBoundingClientRect().height;if(f){g.$fixedBody.find("tr:eq("+j+")").height(k)}if(h){g.$fixedBodyRight.find("tr:eq("+j+")").height(k)}});this.$tableBody.on("mouseover",function(){d(this).off("scroll.fixed.frozen").on("scroll.fixed.frozen",function(){var j=d(this).scrollTop();g.$fixedBodyInner.scrollTop(j);g.$fixedBodyInnerRight.scrollTop(j)})});this.$body.find("> tr[data-index]").off("hover").hover(function(){var j=d(this).data("index");g.$fixedBody.find('tr[data-index="'+j+'"]').addClass("hover");g.$fixedBodyRight.find('tr[data-index="'+j+'"]').addClass("hover")},function(){var j=d(this).data("index");g.$fixedBody.find('tr[data-index="'+j+'"]').removeClass("hover");g.$fixedBodyRight.find('tr[data-index="'+j+'"]').removeClass("hover")});if(f){this.$fixedBody.css({width:this.$fixedHeader.width(),height:e,top:i}).show();this.$fixedBodyInner.on("mouseover",function(){d(this).off("scroll.fixed.frozen").on("scroll.fixed.frozen",function(){var j=d(this).scrollTop();g.$tableBody.scrollTop(j);g.$fixedBodyInnerRight.scrollTop(j)})});this.$fixedBody.find("tr[data-index]").off("hover").hover(function(){var j=d(this).data("index");g.$body.find('> tr[data-index="'+j+'"]').addClass("hover");g.$fixedBodyRight.find('tr[data-index="'+j+'"]').addClass("hover")},function(){var j=d(this).data("index");g.$body.find('> tr[data-index="'+j+'"]').removeClass("hover");g.$fixedBodyRight.find('tr[data-index="'+j+'"]').removeClass("hover")})}else{this.$fixedBody.hide()}if(h){this.$fixedBodyRight.css({width:this.scrollBarWidth?this.$fixedHeaderRight.width()-this.scrollBarWidth:this.$fixedHeaderRight.width(),height:e,top:i,right:this.scrollBarWidth}).show();this.$fixedBodyInnerRight.on("mouseover",function(){d(this).off("scroll.fixed.frozen").on("scroll.fixed.frozen",function(){var j=d(this).scrollTop();g.$tableBody.scrollTop(j);g.$fixedBodyInner.scrollTop(j)})});this.$fixedBodyRight.find("tr[data-index]").off("hover").hover(function(){var j=d(this).data("index");g.$body.find('> tr[data-index="'+j+'"]').addClass("hover");g.$fixedBody.find('tr[data-index="'+j+'"]').addClass("hover")},function(){var j=d(this).data("index");g.$body.find('> tr[data-index="'+j+'"]').removeClass("hover");g.$fixedBody.find('tr[data-index="'+j+'"]').removeClass("hover")})}else{this.$fixedBodyRight.hide()}this.$fixedHeaderColumns.find("th .icon-question").each(function(){d(this).tooltip({position:"auto bottom"})});this.$fixedHeaderColumnsRight.find("th .icon-question").each(function(){d(this).tooltip({position:"auto bottom"})})}})(jQuery);